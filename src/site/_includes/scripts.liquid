<!--
  Demo JS

  I was unable to add JS comments because
  it breaks the build for some weird reason

  But this is all we should need really
  Most of the code are just some helper
  functions.

  Let me know what you think,
  Pedro
-->

<script type="text/javascript">
  var html = document.querySelector('html');
  removeClass(html, 'no-js');
  addClass(html, 'js');

  toggleDocumentationMenu();

  if (isTouch()) {
    toggleMainNav();
  }

  function toggleDocumentationMenu() {
    var navBtn = document.querySelector('.main-nav__btn');
    var navList = document.querySelector('.main-nav__list');
    var navListIsOpened = false;

    navBtn.addEventListener('click', function (event) {
      console.log('clicked -> ');
      event.preventDefault();

      if (!navListIsOpened) {
        addClass(navList, 'nav-is-opened');
        navListIsOpened = true;
      } else {
        removeClass(navList, 'nav-is-opened');
        navListIsOpened = false;
      }
    });
  }

  function toggleMainNav() {
    var documentationItem = document.querySelector('.main-nav__item--documentation');
    var documentationLink = document.querySelector('.main-nav__item--documentation > .main-nav__link');
    var documentationIsOpened = false;

    removeClass(html, 'no-touch');
    addClass(html, 'is-touch');

    documentationLink.addEventListener('click', function (event) {
      event.preventDefault();

      if (!documentationIsOpened) {
        documentationIsOpened = true;
        addClass(documentationItem, 'subnav-is-opened');
      } else {
        documentationIsOpened = false;
        removeClass(documentationItem, 'subnav-is-opened');
      }

    });
  }

  function isTouch() {
    return ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;
  };

  function addClass(element, className) {
    if (!element) { return; }
    element.className = element.className.replace(/\s+$/gi, '') + ' ' + className;
  }

  function removeClass(element, className) {
    if (!element) { return; }
    element.className = element.className.replace(className, '');
  }
</script>
