{% include page-structure/open-page.liquid %}

<p>{{ page.description }}</p>

<!-- Latest Episode -->
{% if page.context.subdirectories.size > 0 %}
  {% assign latestSeason = page.context.subdirectories.last %}
  {% assign latestEpisode = latestSeason.pages.last %}
  <div class="showhome-subheading">
    <p class="showhome-subheading__description">Latest Episode</p>
    <h3 class="showhome-subheading__title">{{ latestEpisode.title }}</h3>
  </div>

  {% ytvideo latestEpisode.youtubeID %}
{% endif %}

{{ content }}

<div class="shows-feeds">
  <h5 class="shows-feeds__title">Follow {{ page.title }}!</h5>
  <a class="shows-feeds__link" href="{{ feedURL }}">
    <img src="{{site.WFBaseUrl}}/imgs/shows/rss-icon.svg" alt="RSS Feed Icon" class="shows-feeds__btn" />
  </a>
  {% if include.emailSubscriptionLink %}
  <a class="feedlink-emailsubcribe" href="{{ include.emailSubscriptionLink }}">
    <img src="{{site.WFBaseUrl}}/imgs/shows/mail-icon.svg" alt="Mail Subscription Icon" class="feedmail-icon" />
  </a>
  {% endif %}
</div>

{% for subdirectory in page.context.subdirectories reversed %}
  <h4 class="show-series-list__title showhome--series-title-{{ page.id }} g-wide--full">
    {{subdirectory.index.title}}
  </h4>

  {% comment %}
  The sizes of grid:

  Desktop: 12
  Tablet: 8
  Phone: 4
  {% endcomment %}
  <div class="mdl-grid">
    {% for showPage in subdirectory.pages reversed %}
      {% capture imgUrl %}https://img.youtube.com/vi/{{showPage.youtubeID}}/mqdefault.jpg {% endcapture %}
      {% include shared/card.liquid title=showPage.title text=showPage.description linkHref=showPage.relative_url linkText="Watch Now" imgUrl=imgUrl %}
    {% endfor %}
  </div>

  {% comment %}
  <!-- List of Videos -->
  <ol class="show-series-list">
    {% for showPage in subdirectory.pages reversed %}
    <li>
      <a class="show-series-list__link" href="{{ showPage.relative_url }}">
        <div class="show-series-list__item">
          <img class="show-series-list__item-img" src="" />
          <div class="show-series-list__item-info">
            <h1 class="show-series-list__item-title">{{ showPage.title }}</h1>
            <p class="show-series-list__item-description">{{ showPage.description }}</p>
          </div>
        </div>
      </a>
    </li>
    {% endfor %}
  </ol>
  {% endcomment %}
{% endfor %}

{% include page-structure/close-page.liquid %}
